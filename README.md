# ■実行環境
Python3.10.2環境にて作成。pandasライブラリを別途インストールする必要あり。

# ■実行方法
testフォルダをダウンロードし、testフォルダ配下の各設問に対応したプログラム（設問1：q1.py～設問4：q4.py）を実行してください。

実行結果はoutフォルダの各設問フォルダ(q1～q4)配下にプログラム実行日時(YYYYMMDDhhmmss)の名前のフォルダが作成されます。

読み込み対象の監視ログファイルはlogフォルダ配下にそれぞれ設問に対応した名称で格納されています。




# 設問1
実行プログラム：test/q1.py

読み込みファイル名：test/log/q1.log

出力ファイル：test/out/q1/{実行日時フォルダ：YYYYMMDDmmhhss}/{YYYYMMDDmmhhss}_server_failure.csv

ログファイルをpandasのDataFrameで読み込み、IPアドレス、確認日時でソートし、forで1行づつタイムアウトの行、タイムアウトが終わった行を確認、

故障開始日時などの一時情報保存領域として辞書を利用し、故障の条件が整い次第故障期間ログを1行毎に追記する方法でCSVを出力しています。


# 設問2
実行プログラム：test/q2.py

読み込みファイル名：test/log/q2.log

出力ファイル：test/out/q2/{実行日時フォルダ：YYYYMMDDmmhhss}/{YYYYMMDDmmhhss}_server_failure.csv


入力パラメータNを追加し、一時情報保存領域である辞書のvalueに情報を格納、N回連続タイムアウトの判断軸として利用しています。


# 設問3
実行プログラム：test/q3.py

読み込みファイル名：test/log/q3.log

出力ファイル(故障期間CSV)：test/out/q3/{実行日時フォルダ：YYYYMMDDmmhhss}/{YYYYMMDDmmhhss}_server_failure.csv

出力ファイル(過負荷期間CSV)：test/out/q3/{実行日時フォルダ：YYYYMMDDmmhhss}/{YYYYMMDDmmhhss}_server_over_load.csv


入力パラメータM、Tを追加。N回未満のタイムアウトを過負荷として計測するため、'-'（ハイフン）を4000ミリ秒とみなし置換し、その上でmean関数による直近M回の平均値列を追加し、

過負荷期間の出力に利用しています。

出力CVSには過負荷状態の内訳として過負荷内訳列を追加し、応答時間を時間順にカンマ区切りでつなげて格納しています。

これによりN回未満のタイムアウトも高負荷期間として出力していますが、N回を超えた故障期間を除外する事ができていません。

高負荷と故障は明確に分け、故障期間＋故障明けのM回分の平均値は過負荷と扱わないようにするべきと考えましたが時間切れもあり実現できませんでした。


# 設問4
実行プログラム：test/q4.py

読み込みファイル名：test/log/q4.log

出力ファイル(故障期間CSV)：test/out/q4/{実行日時フォルダ：YYYYMMDDmmhhss}/{YYYYMMDDmmhhss}_server_failure.csv

出力ファイル(スイッチ故障期間CSV)：test/out/q4/{実行日時フォルダ：YYYYMMDDmmhhss}/{YYYYMMDDmmhhss}_subnet_failure.csv

IP列からネットワークアドレスを求めて列を追加しました。ネットワークアドレスをKeyとした辞書を利用し、故障期間が発生する度に辞書内の同一ネットワークアドレスサーバIP管理クラスに故障期間のレコードを追加、

同一ネットワーク内全サーバIPが揃ったタイミングで故障期間レコード内のもっとも遅い故障開始期間と最も早い終了期間が前後していなければ重複とみなし、サブネット故障期間を出力しています。

